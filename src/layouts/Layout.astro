---
import { site } from "../data/site.config";
import "../styles/global.css";

const {
  title = site.seo.title,
  description = site.seo.description,
  ogImage = "/og.jpg",
} = Astro.props;

const canonicalUrl = new URL(Astro.url.pathname, Astro.url.origin).href;
---

<!doctype html>
<html lang="en" data-theme={site.theme}>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />

    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="canonical" href={canonicalUrl} />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={canonicalUrl} />
    <meta property="og:image" content={ogImage} />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImage} />
  </head>

  <body class="min-h-screen bg-white text-gray-900">
    <!-- header goes here (your current one, or the nav version you added) -->
    <header class="sticky top-0 z-50 border-b bg-white/90 backdrop-blur">
      <div class="mx-auto flex max-w-6xl items-center justify-between px-4 py-3">
        <a href="/" class="text-sm font-semibold tracking-tight">{site.business.name}</a>

        <nav class="hidden items-center gap-6 md:flex">
          <a class="text-sm font-medium text-gray-700 hover:text-gray-900" href="/">Home</a>
          <a class="text-sm font-medium text-gray-700 hover:text-gray-900" href="/services">Services</a>
          <a class="text-sm font-medium text-gray-700 hover:text-gray-900" href="/contact">Contact</a>
        </nav>

        <div class="hidden items-center gap-3 md:flex">
          <a class="text-sm font-medium" href={site.cta.secondaryHref}>{site.business.phone}</a>
          <a class="rounded-lg bg-gray-900 px-4 py-2 text-sm font-semibold text-white hover:bg-gray-800" href="/#quote">
            {site.cta.primaryText}
          </a>
        </div>

        <details class="relative md:hidden">
          <summary class="list-none rounded-lg border px-3 py-2 text-sm font-semibold">Menu</summary>
          <div class="absolute right-0 mt-2 w-56 rounded-xl border bg-white p-2 shadow-lg">
            <a class="block rounded-lg px-3 py-2 text-sm font-medium hover:bg-gray-50" href="/">Home</a>
            <a class="block rounded-lg px-3 py-2 text-sm font-medium hover:bg-gray-50" href="/services">Services</a>
            <a class="block rounded-lg px-3 py-2 text-sm font-medium hover:bg-gray-50" href="/contact">Contact</a>
            <div class="my-2 h-px bg-gray-200"></div>
            <a class="block rounded-lg px-3 py-2 text-sm font-semibold hover:bg-gray-50" href={site.cta.secondaryHref}>
              {site.business.phone}
            </a>
            <a class="mt-2 block rounded-lg bg-gray-900 px-3 py-2 text-center text-sm font-semibold text-white hover:bg-gray-800" href="/#quote">
              {site.cta.primaryText}
            </a>
          </div>
        </details>
      </div>
    </header>

    <main>
      <slot />
    </main>

    <footer class="border-t py-10">
      <div class="mx-auto max-w-6xl px-4 text-sm text-gray-600">
        Â© {new Date().getFullYear()} {site.business.name}. All rights reserved.
      </div>
    </footer>
  </body>
</html>
